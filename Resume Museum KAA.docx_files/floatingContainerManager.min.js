(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[35],{2642:function(t,e,n){"use strict";n.r(e);var o,i=n(61),r=n(3);!function(t){t[t.CommentThread=0]="CommentThread",t[t.TrackedChange=1]="TrackedChange"}(o||(o={}));var a,s,c;function d(t){switch(t){case o.CommentThread:return i.b.CommentThread;case o.TrackedChange:return i.b.TrackedChange;default:return i.b.CommentThread}}!function(t){t[t.msoulscat_Wac_Telemetry=383]="msoulscat_Wac_Telemetry"}(a||(a={})),function(t){t[t.Error=10]="Error",t[t.Warning=15]="Warning",t[t.Info=50]="Info",t[t.Verbose=100]="Verbose",t[t.Spam=200]="Spam"}(s||(s={})),function(t){t[t.containerVirtualizationEnabled=0]="containerVirtualizationEnabled"}(c||(c={}));var u=function(){function t(t,e,n){void 0===n&&(n=0),this.disableRepositioningAnimation=!1,this.positionFixed=!1,this.anchorLeft=0,this.shouldUpdatePositions=!1,this.aggregateHeight=0,this.possibleTopForNextContainer=0,this.renderMode=i.e.Integrated,this.constructContainerId=t,this.ulsLogger=e,this.activeContainerAnchorLeft=n}return t.prototype.getAggregateHeight=function(){return this.aggregateHeight},t.prototype.calculateNewPositions=function(t,e,n){this.disableRepositioningAnimation=!!n&&!!n.disableRepositioningAnimation,this.positionFixed=!!n&&!!n.positionFixed,this.shouldUpdatePositions=!n||!1!==n.shouldUpdatePositions;var o=t[0];if(this.anchorLeft=o&&o.anchorLeft?o.anchorLeft:0,n&&n.activeContainerInfo){var i=n.activeContainerInfo;this.updateContainerPositionsAroundActiveContainer(t,e,i)}else{var r=n?n.topOfFirstContainer:void 0;this.setRestPositionOfContainers(t,e,r)}},t.prototype.updateContainersPositions=function(t,e,n){this.calculateNewPositions(t,e,n)},t.prototype.updateContainerPositionsAroundActiveContainer=function(t,e,n){var o=e[n.containerId];if(o){var i=o.floatingContainerRef,c=this.shouldUpdatePositions&&i?i.height():o.position.height;this.shouldUpdatePositions&&i&&(i.anchorPoint().y!==o.anchorTop||i.anchorPoint().x!==this.activeContainerAnchorLeft)&&i.updateContainerPosition({anchorPoint:{x:this.activeContainerAnchorLeft,y:o.anchorTop},disableRepositioningAnimation:this.disableRepositioningAnimation,positionFixed:this.positionFixed}),this.updateFloatingContainerPositionInCache(e,n.containerId,Object(r.__assign)(Object(r.__assign)({},o.position),{x:this.activeContainerAnchorLeft,y:o.anchorTop})),this.updateContainerPositionsAboveActiveContainer(t,e,o.anchorTop,n.containerPositionIndex-1),this.possibleTopForNextContainer=this.getBottomPositionOfContainer(o,o.anchorTop,c),this.updateContainerPositionsDownwards(t,e,n.containerPositionIndex+1),this.aggregateHeight=n.containerPositionIndex===t.length-1?c+o.anchorTop:this.aggregateHeight}else this.ulsLogger.sendTraceTag(595358743,a.msoulscat_Wac_Telemetry,s.Error,"Floating container info does not exist for the active container Id: ".concat(n.containerId))},t.prototype.updateContainerPositionsDownwards=function(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);for(var i={},r=n;r<t.length;r+=1){if((a=t[r])&&a.contentId){if(!(s=this.getFloatingContainerInfo(a,e)))continue;i[a.contentId]=this.shouldUpdatePositions&&s.floatingContainerRef?s.floatingContainerRef.height():s.position.height}}for(r=n;r<t.length;r+=1){var a,s=this.getFloatingContainerInfo(t[r],e),c=(a=t[r])&&a.contentId;if(void 0===s||!c)return;var d=this.updateFloatingContainerPosition(t[r],e,i[c]);if(r===t.length-1&&s&&(this.aggregateHeight=i[c]+s.position.y),o&&d)return}},t.prototype.updateContainerPositionsAboveActiveContainer=function(t,e,n,o){var i=t[0]?t[0].anchorTop:void 0;this.setRestPositionOfContainers(t.slice(0,o+1),e,i);for(var a=n,s=o;s>=0;s-=1){var c=this.getFloatingContainerInfo(t[s],e);if(void 0===c||this.getBottomPositionOfContainer(c)<=a)return;var d=c.floatingContainerRef,u=a-(this.shouldUpdatePositions&&d?d.height():c.position.height)-10;this.shouldUpdatePositions&&d&&d.updateContainerPosition({anchorPoint:{x:this.anchorLeft,y:u},disableRepositioningAnimation:this.disableRepositioningAnimation,positionFixed:this.positionFixed}),this.updateFloatingContainerPositionInCache(e,this.getContainerId(t[s]),Object(r.__assign)(Object(r.__assign)({},c.position),{x:this.anchorLeft,y:u})),a=u}},t.prototype.setRestPositionOfContainers=function(t,e,n){var o;if(t.length>0){var i=this.getFloatingContainerInfo(t[0],e);if(void 0===i)return;var r=null===(o=i.floatingContainerRef)||void 0===o?void 0:o.anchorPoint().y,a=this.shouldUpdatePositions&&void 0!==r&&!this.positionFixed?r:i.position.y;this.possibleTopForNextContainer=null!=n?n:Math.max(i.anchorTop,a),this.updateContainerPositionsDownwards(t,e,0)}},t.prototype.getFloatingContainerInfo=function(t,e){return e[this.getContainerId(t)]},t.prototype.getContainerId=function(t){var e=t.contentId;return this.constructContainerId({contentId:e,contentType:d(t.containerContentType),renderMode:this.renderMode})},t.prototype.updateFloatingContainerPosition=function(t,e,n){var o=this.getFloatingContainerInfo(t,e);if(void 0===o)return!1;var i=this.shouldUpdatePositions&&o.floatingContainerRef?o.floatingContainerRef.anchorPoint().y:o.position.y,a=Math.max(this.possibleTopForNextContainer,o.anchorTop);return a!==i&&(this.shouldUpdatePositions&&o.floatingContainerRef&&o.floatingContainerRef.updateContainerPosition({anchorPoint:{x:this.anchorLeft,y:a},disableRepositioningAnimation:this.disableRepositioningAnimation,positionFixed:this.positionFixed}),this.updateFloatingContainerPositionInCache(e,this.getContainerId(t),Object(r.__assign)(Object(r.__assign)({},o.position),{x:this.anchorLeft,y:a}))),this.possibleTopForNextContainer=this.getBottomPositionOfContainer(o,a,n),a===i},t.prototype.getBottomPositionOfContainer=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var o,i,r=t.floatingContainerRef,a=null==r?void 0:r.anchorPoint().y;return this.shouldUpdatePositions&&r&&void 0!==a?(o=a,i=r.height()):(o=t.position.y,i=t.position.height),(null!=e?e:o)+(null!=n?n:i)+10},t.prototype.updateFloatingContainerPositionInCache=function(t,e,n){t[e].position=n},t}(),p=n(2559),l=function(){function t(t){this.eventSink=t}return t.prototype.unsubscribe=function(){this.eventSink.unsubscribe(this)},t}(),h=function(){function t(){this.handlers=[]}return t.prototype.subscribe=function(t){var e=new l(this);return this.handlers.push({subscription:e,handler:t}),e},t.prototype.unsubscribe=function(t){this.handlers=this.handlers.filter((function(e){return e.subscription!==t}))},t.prototype.trigger=function(t){this.handlers.forEach((function(e){return e.handler(t,e.subscription)}))},t}(),C=function(){function t(t){this.onContainerShouldBeCreated=new h,this.motionDuration=p.b.duration4,this.posUpdateAnimationsInProgress=!1,this.containerVirtualizationEnabled=!1,t&&(this.containerVirtualizationEnabled=!!t.containerVirtualizationEnabled)}return t.prototype.updateContainersVisibility=function(t,e,n,o,i){var r=this;if(void 0===n&&(n=!1),void 0===i&&(i=!1),e.height>0){var a={viewportTop:e.y-e.height/2,viewportBottom:e.y+1.5*e.height,containerIdToInfoMap:t,activeContainerId:o};if(!i&&!this.posUpdateAnimationsInProgress)return void this.handleContainerVirtualization(n,a);this.posUpdateAnimationsInProgress=!0,this.showContainersComingIntoViewport(a),setTimeout((function(){r.updatePositions(a,n),window.clearTimeout(r.hideContainersTimeout),r.hideContainersTimeout=window.setTimeout((function(){r.hideContainersOutsideViewport(a),r.posUpdateAnimationsInProgress=!1}),parseInt(r.motionDuration,10))}),0)}},t.prototype.handleContainerVirtualization=function(t,e){var n=this;Object.keys(e.containerIdToInfoMap).forEach((function(o){var i=n.extractContainerInfo(o,e);n.updateContainerVisibility(i,e.activeContainerId===o),n.updateContainerPosition(i,t)}))},t.prototype.showContainersComingIntoViewport=function(t){var e=this;Object.keys(t.containerIdToInfoMap).forEach((function(n){var o=e.extractContainerInfo(n,t);e.updateContainerVisibility(o,t.activeContainerId===n)}))},t.prototype.hideContainersOutsideViewport=function(t){var e=this;Object.keys(t.containerIdToInfoMap).forEach((function(n){var o=e.extractContainerInfo(n,t);e.updateContainerVisibility(o,t.activeContainerId===n)}))},t.prototype.updatePositions=function(t,e){var n=this;Object.keys(t.containerIdToInfoMap).forEach((function(o){var i=n.extractContainerInfo(o,t);n.updateContainerPosition(i,e)}))},t.prototype.updateContainerVisibility=function(t,e){t.containerRef&&t.containerElement&&((t.isContainerInViewport||e)&&"block"!==t.containerElement.style.display?(t.containerElement.style.display="block",this.containerVirtualizationEnabled&&t.containerRef.updateContainerVirtualization(!1)):!1===t.isContainerInViewport&&"none"!==t.containerElement.style.display&&(t.containerElement.style.display="none",this.containerVirtualizationEnabled&&t.containerRef.updateContainerVirtualization(!0)))},t.prototype.updateContainerPosition=function(t,e){var n=t.containerElement;n&&(n.style.top="".concat(t.containerPosition.y,"px"),n.style.left="".concat(t.containerPosition.x,"px"),n.style.transitionDuration=e?"0ms":this.motionDuration)},t.prototype.extractContainerInfo=function(t,e){var n,o=e.containerIdToInfoMap[t],i=o.floatingContainerRef,r=o.position,a={containerElement:void 0,isContainerInViewport:r.y+r.height>=e.viewportTop&&r.y<=e.viewportBottom,containerRef:void 0,containerPosition:r};return i&&(a.containerRef=i,a.containerElement=null===(n=document.getElementById(i.parentDivId()))||void 0===n?void 0:n.firstChild),a},t}(),f=n(17),g=n(2355),v=n(252),m=n(4),y=n.n(m),I=n(32),b=y.a.createContext(null);var T=function(t){t()};function P(){var t=T,e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(t){var o=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){o&&null!==e&&(o=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var E={notify:function(){},get:function(){return[]}};function S(t,e){var n,o=E;function i(){a.onStateChange&&a.onStateChange()}function r(){n||(n=e?e.addNestedSub(i):t.subscribe(i),o=P())}var a={addNestedSub:function(t){return r(),o.subscribe(t)},notifyNestedSubs:function(){o.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:r,tryUnsubscribe:function(){n&&(n(),n=void 0,o.clear(),o=E)},getListeners:function(){return o}};return a}var A="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?m.useLayoutEffect:m.useEffect;var R=function(t){var e=t.store,n=t.context,o=t.children,i=Object(m.useMemo)((function(){var t=S(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),r=Object(m.useMemo)((function(){return e.getState()}),[e]);A((function(){var t=i.subscription;return t.trySubscribe(),r!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[i,r]);var a=n||b;return y.a.createElement(a.Provider,{value:i},o)},O=n(137),x=n(138),w=n(410),F=n.n(w),D=n(268),M=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],_=["reactReduxForwardedRef"],k=[],V=[null,null];function j(t,e){var n=t[1];return[e.payload,n+1]}function U(t,e,n){A((function(){return t.apply(void 0,e)}),n)}function z(t,e,n,o,i,r,a){t.current=o,e.current=i,n.current=!1,r.current&&(r.current=null,a())}function N(t,e,n,o,i,r,a,s,c,d){if(t){var u=!1,p=null,l=function(){if(!u){var t,n,l=e.getState();try{t=o(l,i.current)}catch(t){n=t,p=t}n||(p=null),t===r.current?a.current||c():(r.current=t,s.current=t,a.current=!0,d({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=l,n.trySubscribe(),l();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}}var L=function(){return[null,0]};function H(t,e){void 0===e&&(e={});var n=e,o=n.getDisplayName,i=void 0===o?function(t){return"ConnectAdvanced("+t+")"}:o,r=n.methodName,a=void 0===r?"connectAdvanced":r,s=n.renderCountProp,c=void 0===s?void 0:s,d=n.shouldHandleStateChanges,u=void 0===d||d,p=n.storeKey,l=void 0===p?"store":p,h=(n.withRef,n.forwardRef),C=void 0!==h&&h,f=n.context,g=void 0===f?b:f,v=Object(x.a)(n,M),I=g;return function(e){var n=e.displayName||e.name||"Component",o=i(n),r=Object(O.a)({},v,{getDisplayName:i,methodName:a,renderCountProp:c,shouldHandleStateChanges:u,storeKey:l,displayName:o,wrappedComponentName:n,WrappedComponent:e}),s=v.pure;var d=s?m.useMemo:function(t){return t()};function p(n){var o=Object(m.useMemo)((function(){var t=n.reactReduxForwardedRef,e=Object(x.a)(n,_);return[n.context,t,e]}),[n]),i=o[0],a=o[1],s=o[2],c=Object(m.useMemo)((function(){return i&&i.Consumer&&Object(D.isContextConsumer)(y.a.createElement(i.Consumer,null))?i:I}),[i,I]),p=Object(m.useContext)(c),l=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(p)&&Boolean(p.store);var h=l?n.store:p.store,C=Object(m.useMemo)((function(){return function(e){return t(e.dispatch,r)}(h)}),[h]),f=Object(m.useMemo)((function(){if(!u)return V;var t=S(h,l?null:p.subscription),e=t.notifyNestedSubs.bind(t);return[t,e]}),[h,l,p]),g=f[0],v=f[1],b=Object(m.useMemo)((function(){return l?p:Object(O.a)({},p,{subscription:g})}),[l,p,g]),T=Object(m.useReducer)(j,k,L),P=T[0][0],E=T[1];if(P&&P.error)throw P.error;var A=Object(m.useRef)(),R=Object(m.useRef)(s),w=Object(m.useRef)(),F=Object(m.useRef)(!1),M=d((function(){return w.current&&s===R.current?w.current:C(h.getState(),s)}),[h,P,s]);U(z,[R,A,F,s,M,w,v]),U(N,[u,h,g,C,R,A,F,w,v,E],[h,g,C]);var H=Object(m.useMemo)((function(){return y.a.createElement(e,Object(O.a)({},M,{ref:a}))}),[a,e,M]);return Object(m.useMemo)((function(){return u?y.a.createElement(c.Provider,{value:b},H):H}),[c,H,b])}var h=s?y.a.memo(p):p;if(h.WrappedComponent=e,h.displayName=p.displayName=o,C){var f=y.a.forwardRef((function(t,e){return y.a.createElement(h,Object(O.a)({},t,{reactReduxForwardedRef:e}))}));return f.displayName=o,f.WrappedComponent=e,F()(f,e)}return F()(h,e)}}function B(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function W(t,e){if(B(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!B(t[n[i]],e[n[i]]))return!1;return!0}function q(t){return function(e,n){var o=t(e,n);function i(){return o}return i.dependsOnOwnProps=!1,i}}function G(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function Q(t,e){return function(e,n){n.displayName;var o=function(t,e){return o.dependsOnOwnProps?o.mapToProps(t,e):o.mapToProps(t)};return o.dependsOnOwnProps=!0,o.mapToProps=function(e,n){o.mapToProps=t,o.dependsOnOwnProps=G(t);var i=o(e,n);return"function"==typeof i&&(o.mapToProps=i,o.dependsOnOwnProps=G(i),i=o(e,n)),i},o}}var J=[function(t){return"function"==typeof t?Q(t):void 0},function(t){return t?void 0:q((function(t){return{dispatch:t}}))},function(t){return t&&"object"==typeof t?q((function(e){return function(t,e){var n={},o=function(o){var i=t[o];"function"==typeof i&&(n[o]=function(){return e(i.apply(void 0,arguments))})};for(var i in t)o(i);return n}(t,e)})):void 0}];var K=[function(t){return"function"==typeof t?Q(t):void 0},function(t){return t?void 0:q((function(){return{}}))}];function Y(t,e,n){return Object(O.a)({},n,t,e)}var X=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var o,i=n.pure,r=n.areMergedPropsEqual,a=!1;return function(e,n,s){var c=t(e,n,s);return a?i&&r(c,o)||(o=c):(a=!0,o=c),o}}}(t):void 0},function(t){return t?void 0:function(){return Y}}];var Z=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function $(t,e,n,o){return function(i,r){return n(t(i,r),e(o,r),r)}}function tt(t,e,n,o,i){var r,a,s,c,d,u=i.areStatesEqual,p=i.areOwnPropsEqual,l=i.areStatePropsEqual,h=!1;function C(i,h){var C,f,g=!p(h,a),v=!u(i,r);return r=i,a=h,g&&v?(s=t(r,a),e.dependsOnOwnProps&&(c=e(o,a)),d=n(s,c,a)):g?(t.dependsOnOwnProps&&(s=t(r,a)),e.dependsOnOwnProps&&(c=e(o,a)),d=n(s,c,a)):v?(C=t(r,a),f=!l(C,s),s=C,f&&(d=n(s,c,a)),d):d}return function(i,u){return h?C(i,u):(s=t(r=i,a=u),c=e(o,a),d=n(s,c,a),h=!0,d)}}function et(t,e){var n=e.initMapStateToProps,o=e.initMapDispatchToProps,i=e.initMergeProps,r=Object(x.a)(e,Z),a=n(t,r),s=o(t,r),c=i(t,r);return(r.pure?tt:$)(a,s,c,t,r)}var nt=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ot(t,e,n){for(var o=e.length-1;o>=0;o--){var i=e[o](t);if(i)return i}return function(e,o){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+o.wrappedComponentName+".")}}function it(t,e){return t===e}function rt(t){var e=void 0===t?{}:t,n=e.connectHOC,o=void 0===n?H:n,i=e.mapStateToPropsFactories,r=void 0===i?K:i,a=e.mapDispatchToPropsFactories,s=void 0===a?J:a,c=e.mergePropsFactories,d=void 0===c?X:c,u=e.selectorFactory,p=void 0===u?et:u;return function(t,e,n,i){void 0===i&&(i={});var a=i,c=a.pure,u=void 0===c||c,l=a.areStatesEqual,h=void 0===l?it:l,C=a.areOwnPropsEqual,f=void 0===C?W:C,g=a.areStatePropsEqual,v=void 0===g?W:g,m=a.areMergedPropsEqual,y=void 0===m?W:m,I=Object(x.a)(a,nt),b=ot(t,r,"mapStateToProps"),T=ot(e,s,"mapDispatchToProps"),P=ot(n,d,"mergeProps");return o(p,Object(O.a)({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:b,initMapDispatchToProps:T,initMergeProps:P,pure:u,areStatesEqual:h,areOwnPropsEqual:f,areStatePropsEqual:v,areMergedPropsEqual:y},I))}}var at=rt();var st,ct;st=I.unstable_batchedUpdates,T=st,function(t){t[t.Enablement=1]="Enablement",t[t.Focus=2]="Focus",t[t.Hover=3]="Hover",t[t.Resize=4]="Resize",t[t.Visibility=5]="Visibility"}(ct||(ct={}));var dt,ut=n(177);function pt(t,e){return{type:t,payload:e}}!function(t){t.ChangeRenderedContentIdentifierType="CHANGE_RENDERED_CONTENT_IDENTIFIER",t.EmptyActionType="",t.RemoveVisibilityAnimationType="REMOVE_VISIBILITY_ANIMATION",t.RepositionType="REPOSITION_FLOATING_CONTAINER",t.SetContentType="SET_CONTENT",t.UpdateContainerVirtualizationType="UPDATE_FLOATING_CONTAINER_VIRTUALIZATION",t.UpdateContainerVisibilityType="UPDATE_FLOATING_CONTAINER_VISIBILITY",t.UpdateContentMaxDimensionsType="UPDATE_CONTENT_MAX_DIMENSIONS",t.UpdateContentSetItemDetailsType="UPDATE_CONTENT_SET_ITEM_DETAILS"}(dt||(dt={}));var lt={anchorPoint:{x:0,y:0}};function ht(t,e){var n;return void 0===e&&(e=lt),{anchorPoint:e.anchorPoint,contentIdentifier:t,disableRepositioningAnimation:!1,isVisible:!1,isVirtualized:!1,maxDimensions:e.maxDimensions||{},positionFixed:!1,useVisibilityAnimation:!1,accessibilityMetadata:null!==(n=e.accessibilityMetadata)&&void 0!==n?n:{}}}var Ct={contentId:"",contentType:i.b.Empty};function ft(t,e){switch(void 0===t&&(t=ht(Ct)),void 0===e&&(e=pt(dt.EmptyActionType,{})),e.type){case dt.ChangeRenderedContentIdentifierType:return function(t,e){if(t.contentIdentifier.contentId===e.payload.newContentIdentifier.contentId&&t.contentIdentifier.contentType===e.payload.newContentIdentifier.contentType)return t;return Object(r.__assign)(Object(r.__assign)({},t),{contentIdentifier:e.payload.newContentIdentifier})}(t,e);case dt.RemoveVisibilityAnimationType:return function(t){return Object(r.__assign)(Object(r.__assign)({},t),{useVisibilityAnimation:!1})}(t);case dt.RepositionType:return function(t,e){if(t.anchorPoint.x===e.payload.anchorPoint.x&&t.anchorPoint.y===e.payload.anchorPoint.y&&t.disableRepositioningAnimation===e.payload.disableRepositioningAnimation&&t.positionFixed===e.payload.positionFixed)return t;return Object(r.__assign)(Object(r.__assign)({},t),{anchorPoint:e.payload.anchorPoint,disableRepositioningAnimation:e.payload.disableRepositioningAnimation,positionFixed:e.payload.positionFixed})}(t,e);case dt.SetContentType:return function(t,e){return Object(r.__assign)(Object(r.__assign)({},t),{content:e.payload.content,isVisible:!!e.payload.content&&t.isVisible})}(t,e);case dt.UpdateContentMaxDimensionsType:return function(t,e){if(t.maxDimensions.height===e.payload.maxDimensions.height&&t.maxDimensions.width===e.payload.maxDimensions.width)return t;return Object(r.__assign)(Object(r.__assign)({},t),{maxDimensions:e.payload.maxDimensions})}(t,e);case dt.UpdateContentSetItemDetailsType:return function(t,e){var n,o=null===(n=t.accessibilityMetadata)||void 0===n?void 0:n.setItem,i=e.payload.setItemDetails;if(o===i)return t;if(o&&i&&o.positionInSet===i.positionInSet&&o.setSize===i.setSize&&o.level===i.level)return t;return Object(r.__assign)(Object(r.__assign)({},t),{accessibilityMetadata:Object(r.__assign)(Object(r.__assign)({},t.accessibilityMetadata),{setItem:i})})}(t,e);case dt.UpdateContainerVisibilityType:return function(t,e){return Object(r.__assign)(Object(r.__assign)({},t),{isVisible:e.payload.isVisible,useVisibilityAnimation:e.payload.useVisibilityAnimation})}(t,e);case dt.UpdateContainerVirtualizationType:return function(t,e){return Object(r.__assign)(Object(r.__assign)({},t),{isVirtualized:e.payload.isVirtualized})}(t,e);default:return t}}function gt(t){return pt(dt.SetContentType,{content:t})}var vt=function(t){return t.isVirtualized},mt=n(12),yt=n(872),It=Object(mt.ab)({from:{opacity:0,visibility:"visible"},to:{opacity:1}}),bt=Object(mt.ab)({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}}),Tt=Object(yt.c)((function(t,e,n,o){return{floatingContainerView:Object(mt.db)({animationName:e?t?It:bt:void 0,animationDuration:"".concat(300,"ms"),animationTimingFunction:p.c.decelerate,background:"transparent",position:o?"fixed":"absolute",transitionDuration:t&&!n?p.b.duration4:"0s",transitionProperty:"top, left",transitionTimingFunction:p.c.decelerate,visibility:t?"visible":"hidden"})}}));var Pt=n(2582),Et=n(694);function St(t){return"floatingContainerView".concat(t.contentId,"Type").concat(t.contentType)}var At=function(t){function e(e){var n=t.call(this,e)||this;return n.handleResizeUpdates=function(t){t.forEach((function(t){n.props.onContainerStateChanged.trigger({stateChangeType:ct.Resize,contentIdentifier:n.props.contentIdentifier,contentRect:t.contentRect})}))},n.triggerVisibilityUpdateNotification=function(){n.props.onContainerStateChanged.trigger({stateChangeType:ct.Visibility,contentIdentifier:n.props.contentIdentifier,isVisible:n.props.isVisible})},n.getHostedResource=function(t){return{id:t}},n.onFocusChange=function(t,e){var o=t.relatedTarget||document.activeElement;n.parentDivRef&&o instanceof HTMLElement&&n.parentDivRef.contains(o)||n.props.onContainerStateChanged.trigger({stateChangeType:ct.Focus,contentIdentifier:n.props.contentIdentifier,isFocused:e})},n.onFocusOut=function(t){n.onFocusChange(t,!1)},n.onFocusIn=function(t){n.onFocusChange(t,!0)},n.onMouseEnter=function(){n.props.onContainerStateChanged.trigger({stateChangeType:ct.Hover,contentIdentifier:n.props.contentIdentifier,isHovered:!0})},n.onMouseLeave=function(){n.props.onContainerStateChanged.trigger({stateChangeType:ct.Hover,contentIdentifier:n.props.contentIdentifier,isHovered:!1})},n.setContentRef=function(t){n.contentRef=t},n.setParentDivRef=function(t){t!==n.parentDivRef&&(n.parentDivRef&&(n.resizeObserver.unobserve(n.parentDivRef),n.parentDivRef.removeEventListener("focusin",n.onFocusIn,!0),n.parentDivRef.removeEventListener("focusout",n.onFocusOut,!0)),t&&(n.resizeObserver.observe(t),t.addEventListener("focusin",n.onFocusIn,!0),t.addEventListener("focusout",n.onFocusOut,!0))),n.parentDivRef=t},n.contentRef=void 0,n.parentDivRef=void 0,n.resizeObserver=new Et.a((function(t){window.requestAnimationFrame((function(){n.handleResizeUpdates(t)}))})),n.setContentRef=n.setContentRef.bind(n),n.setParentDivRef=n.setParentDivRef.bind(n),n.getHostedResource=Object(Pt.a)(n.getHostedResource.bind(n)),n}return Object(r.__extends)(e,t),e.prototype.componentDidMount=function(){this.triggerVisibilityUpdateNotification()},e.prototype.componentDidUpdate=function(t){var e=this,n=!1;t.isVisible!==this.props.isVisible&&(this.props.useVisibilityAnimation&&!this.props.isVisible?n=!0:this.triggerVisibilityUpdateNotification()),this.props.useVisibilityAnimation&&setTimeout((function(){n&&e.triggerVisibilityUpdateNotification(),e.props.removeVisibilityAnimation()}),300)},e.prototype.height=function(){return this.parentDivRef?this.parentDivRef.clientHeight:0},e.prototype.width=function(){return this.parentDivRef?this.parentDivRef.clientWidth:0},e.prototype.setFocus=function(){this.contentRef&&this.contentRef.focus()},e.prototype.render=function(){if(!this.props.anchorPoint||void 0===this.props.anchorPoint.x||void 0===this.props.anchorPoint.y||!this.props.content)return null;var t=Tt(this.props.isVisible,this.props.useVisibilityAnimation,this.props.disableRepositioningAnimation,this.props.positionFixed),e=this.props.content;return m.createElement("div",{key:St(this.props.contentIdentifier),id:St(this.props.contentIdentifier),ref:this.setParentDivRef,className:t.floatingContainerView,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:{left:this.props.anchorPoint.x,top:this.props.anchorPoint.y}},m.createElement(e,{componentRef:this.setContentRef,resource:this.getHostedResource(this.props.contentIdentifier.contentId),maximumDimensions:this.props.maxDimensions,isVirtualized:this.props.isVirtualized,accessibilityMetadata:this.props.accessibilityMetadata}))},e}(m.Component);var Rt,Ot=at((function(t){return{accessibilityMetadata:t.accessibilityMetadata,anchorPoint:t.anchorPoint,content:t.content,contentIdentifier:t.contentIdentifier,disableRepositioningAnimation:t.disableRepositioningAnimation,isVisible:t.isVisible,isVirtualized:t.isVirtualized,maxDimensions:t.maxDimensions,positionFixed:t.positionFixed,useVisibilityAnimation:t.useVisibilityAnimation}}),(function(t,e){return{removeVisibilityAnimation:function(){t(pt(dt.RemoveVisibilityAnimationType,{}))}}}),void 0,{forwardRef:!0})(At),xt=function(){function t(t,e,n,o){var i;this.onContainerStateChanged=new h,this.floatingContainerRef=void 0,this.extensionUpdatedEventSubscription=void 0,this.unsubscribeStoreListener=function(){},this.canShow=!1,!1===o.isDraftContainer&&(this.floatingContainerCreationActivity=Object(f.i)().createActivityObject("FloatingContainerCreation",Object(f.j)(f.g.GlobalAPI),f.a.None,f.b.NecessaryServiceDataEvent)),this.store=(i=ht(n,o))?Object(ut.createStore)(ft,i):Object(ut.createStore)(ft),this.extensionProvider=e,this.setContentFromExtension(),this.parentDiv=document.createElement("div"),this.parentDiv.id=o.containerId||Object(g.a)(),t.appendChild(this.parentDiv),this.observeStore=this.observeStore.bind(this),this.onUpdatedEventHandler=this.onUpdatedEventHandler.bind(this),this.setFloatingContainerRef=this.setFloatingContainerRef.bind(this),this.observeStore(n),this.render()}return t.prototype.anchorPoint=function(){return this.store.getState().anchorPoint},t.prototype.contentIdentifier=function(){return this.store.getState().contentIdentifier},t.prototype.height=function(){return this.floatingContainerRef?this.floatingContainerRef.height():0},t.prototype.width=function(){return this.floatingContainerRef?this.floatingContainerRef.width():0},t.prototype.parentDivId=function(){return this.parentDiv.id},t.prototype.observeStore=function(t){var e=this;if(Object(i.h)(this.extensionProvider)){var n=t;this.unsubscribeStoreListener=this.store.subscribe((function(){var t=e.contentIdentifier();n.contentId===t.contentId&&n.contentType===t.contentType||(n=t,e.removeExtensionUpdatedEventSubscription(),e.setContentFromExtension())}))}},t.prototype.setContentFromExtension=function(){var t=this,e=void 0;if(Object(i.h)(this.extensionProvider)){if(e=this.extensionProvider.getExtension(this.contentIdentifier().contentId),this.extensionUpdatedEventSubscription||(this.extensionUpdatedEventSubscription=e.onUpdated.subscribe((function(e){t.onUpdatedEventHandler()}))),e.priority===i.d.Disabled)return this.canShow=!1,void this.store.dispatch(gt(void 0))}else e=this.extensionProvider.getExtension();this.canShow=!0,Object(v.c)().getComponent(e.componentKey).then((function(e){t.store.dispatch(gt(e.component)),t.floatingContainerCreationActivity&&(t.floatingContainerCreationActivity.successTag(593872975),t.floatingContainerCreationActivity=void 0)})).catch((function(t){Object(f.i)().assertConditionTag(!1,"Error when registering component in setContentFromExtension ".concat(t),595632583)}))},t.prototype.render=function(){var t={onContainerStateChanged:this.onContainerStateChanged};I.render(m.createElement(R,{store:this.store},m.createElement(Ot,Object(r.__assign)({ref:this.setFloatingContainerRef},t))),this.parentDiv)},t.prototype.updateContainerPosition=function(t){var e,n,o;this.store.dispatch((e=t.anchorPoint,n=!!t.disableRepositioningAnimation,o=!!t.positionFixed,pt(dt.RepositionType,{anchorPoint:e,disableRepositioningAnimation:n,positionFixed:o})))},t.prototype.updateMaximumDimensions=function(t){this.store.dispatch(function(t){return pt(dt.UpdateContentMaxDimensionsType,{maxDimensions:t})}(t))},t.prototype.updateSetItemDetails=function(t){this.store.dispatch(function(t){return pt(dt.UpdateContentSetItemDetailsType,{setItemDetails:t})}(t))},t.prototype.updateContainerVirtualization=function(t){t&&!vt(this.store.getState())?this.store.dispatch(pt(dt.UpdateContainerVirtualizationType,{isVirtualized:!0})):vt(this.store.getState())&&this.store.dispatch(pt(dt.UpdateContainerVirtualizationType,{isVirtualized:!1}))},t.prototype.showFloatingContainer=function(t){return!!this.canShow&&(this.store.dispatch(function(t){return pt(dt.UpdateContainerVisibilityType,{isVisible:!0,useVisibilityAnimation:t})}(!!t)),!0)},t.prototype.hideFloatingContainer=function(t){this.store.dispatch(function(t){return pt(dt.UpdateContainerVisibilityType,{isVisible:!1,useVisibilityAnimation:t})}(!!t))},t.prototype.destroyFloatingContainer=function(t){var e=this;this.unsubscribeStoreListener(),this.removeExtensionUpdatedEventSubscription(),this.hideFloatingContainer(t),t?setTimeout((function(){e.cleanupDomOnDestroy()}),300):this.cleanupDomOnDestroy()},t.prototype.cleanupDomOnDestroy=function(){I.unmountComponentAtNode(this.parentDiv),this.parentDiv.parentElement&&this.parentDiv.parentElement.removeChild(this.parentDiv)},t.prototype.isShowing=function(){return this.store.getState().isVisible},t.prototype.setFocus=function(){var t=this;this.floatingContainerRef?this.floatingContainerRef.setFocus():setTimeout((function(){var e;return null===(e=t.floatingContainerRef)||void 0===e?void 0:e.setFocus()}))},t.prototype.changeRenderedContentIdentifier=function(t){this.store.dispatch(function(t){return pt(dt.ChangeRenderedContentIdentifierType,{newContentIdentifier:t})}(t))},t.prototype.onUpdatedEventHandler=function(){var t=this.canShow;this.setContentFromExtension(),t!==this.canShow&&this.onContainerStateChanged.trigger({stateChangeType:ct.Enablement,contentIdentifier:this.contentIdentifier(),isEnabled:this.canShow})},t.prototype.removeExtensionUpdatedEventSubscription=function(){this.extensionUpdatedEventSubscription&&(this.extensionUpdatedEventSubscription.unsubscribe(),this.extensionUpdatedEventSubscription=void 0)},t.prototype.setFloatingContainerRef=function(t){this.floatingContainerRef=null!=t?t:void 0},t}(),wt=new(function(){function t(){}return t.prototype.createFloatingContainer=function(t,e,n,o){return new xt(t,e,n,o)},t}()),Ft=n(2086);!function(t){t[t.DeselectionEnabled=0]="DeselectionEnabled",t[t.FloatingContainerVirtualizationEnabled=1]="FloatingContainerVirtualizationEnabled",t[t.ImproveJumpingFixEnabled=2]="ImproveJumpingFixEnabled",t[t.ShouldInitialize=3]="ShouldInitialize",t[t.ScrollingPerfImprovementEnabled=4]="ScrollingPerfImprovementEnabled",t[t.SynchronousContainerPositioningEnabled=5]="SynchronousContainerPositioningEnabled",t[t.TrackChangesInSidetrackEnabled=6]="TrackChangesInSidetrackEnabled"}(Rt||(Rt={}));var Dt=n(2322),Mt=n(2323),_t=n(221),kt=n(690),Vt=function(t){var e=m.useState(t.containerContent),n=e[0],o=e[1],i=m.useCallback((function(t){o(t)}),[]),a=te.getTrackChangesStore();m.useEffect((function(){return a.registerOnStoreUpdate(t.id,i),function(){a.removeFromStore(t.id)}}),[t.id,i,a]);var s=m.useMemo((function(){var t,e;return{definitionType:"TrackChangeDefinition",authorName:null!==(t=n.authorName)&&void 0!==t?t:"",authorColor:null!==(e=n.authorColor)&&void 0!==e?e:"",changeDescriptor:n.changeDescriptor,acceptDisabled:!!n.acceptDisabled,rejectDisabled:!!n.rejectDisabled,theme:n.theme}}),[n]),c={acceptHoveredHeading:"Accept suggestion",rejectHoveredHeading:"Reject suggestion",regularHeading:"Accept or reject suggestion?"},d=m.useMemo((function(){return a.getCardActionCallbacks(t.id)}),[t.id,a]),u=m.useMemo((function(){return{definition:s,strings:c,onAcceptHoverIn:d.onAcceptHoverIn,onRejectHoverIn:d.onRejectHoverIn,onAcceptHoverOut:d.onAcceptHoverOut,onRejectHoverOut:d.onRejectHoverOut,onAcceptClick:d.onAcceptClick,onRejectClick:d.onRejectClick,style:{minWidth:240,maxWidth:240}}}),[s,c,d.onAcceptHoverIn,d.onRejectHoverIn,d.onAcceptHoverOut,d.onRejectHoverOut,d.onAcceptClick,d.onRejectClick]),p=m.useCallback((function(){d.onCardClick()}),[d]),l=m.useCallback((function(){d.onCardHoverIn()}),[d]),h=m.useCallback((function(){d.onCardHoverOut()}),[d]);return m.createElement("div",{onClick:p,onMouseEnter:l,onMouseLeave:h},m.createElement(kt.TrackChange,Object(r.__assign)({},u)))},jt=function(t){var e,n,o=te.getTrackChangesStore().getContainerContent(null===(e=t.resource)||void 0===e?void 0:e.id);return o?m.createElement(Vt,{id:null===(n=t.resource)||void 0===n?void 0:n.id,containerContent:o}):null};var Ut=n(1409),zt=n(1459);function Nt(t){return"".concat(t.contentId,"_").concat(t.contentType,"_").concat(t.renderMode)}function Lt(t){switch(t){case i.b.CommentThread:return o.CommentThread;case i.b.TrackedChange:return o.TrackedChange;default:return}}var Ht={width:0,height:0,x:0,y:0};function Bt(t){return void 0!==t.hasBeenRendered}var Wt=function(){function t(t,e,n,o,r){var a=this;this.supportedContentTypes=[i.b.CommentThread,i.b.TrackedChange],this.getContentCardIndex=function(t,e){if(!a.containerIdToInfoMap[t])return a.ULS.sendTraceTag(595883362,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[getContentCardIndex]Container with id ".concat(t," does not exist.")),-1;var n=a.containerIdToInfoMap[t].anchorTop;n=e?Math.max(n,e):n;for(var o=a.getContentCardInsertionPoint(n),i=o;i<a.contentAnchorPositions.length;i+=1)if(a.checkIfContainerIdCorrespondsToGivenPosition(t,i))return i;for(i=0;i<o;i+=1)if(a.checkIfContainerIdCorrespondsToGivenPosition(t,i))return i;return-1},this.initializeExtensionProviderCollection=function(t){a.extensionProviderCollection=a.contentExtensionHostAPIGetter().getExtensions(a.supportedContentTypes,i.c),a.updateContentTypeToExtensionProviderMap(t),a.extensionProviderCollection.onUpdated.subscribe((function(){return a.updateContentTypeToExtensionProviderMap(t)}))},this.getContentCardInsertionPoint=function(t){for(var e,n=0,o=a.contentAnchorPositions.length;n<o;){e=n+Math.floor((o-n)/2),a.contentAnchorPositions[e].anchorTop<t-4?n=e+1:o=e}return n},this.getContainerStateChangedCallback=function(t,e){return function(n,o){switch(n.stateChangeType){case ct.Resize:t(n,o);break;case ct.Visibility:if(n.isVisible)if(!a.commentsTTVRReported)e===a.lastCommentVisibleID&&(Object(Ut.d)(Ut.c,{component:"canvas",subComponent:"floatingComments",state:zt.c}),Object(Ut.d)(Ut.c,{component:"canvas",subComponent:"floatingComments",state:zt.a}),a.commentsTTVRReported=!0)}}},this.renderFloatingContainerAtAnchorPosition=function(t){var e=a.containerIdToInfoMap[t];e&&e.floatingContainerRef&&e.floatingContainerRef.showFloatingContainer(!0)},this.updateContentTypeToExtensionProviderMap=function(t){a.contentTypeToExtensionProviderMap.clear(),void 0!==a.extensionProviderCollection?(a.areCommentExtensionProvidersDefinedOnce||(a.areCommentExtensionProvidersDefinedOnce=0!==a.extensionProviderCollection.providers.filter((function(t){return t.scope.contentType===i.b.CommentThread&&t.scope.renderMode===i.e.Integrated})).length),a.extensionProviderCollection.providers.forEach((function(t){t.scope.renderMode===i.e.Integrated&&a.contentTypeToExtensionProviderMap.set(t.scope.contentType,t)})),t()):a.ULS.sendTraceTag(595886287,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"extensionProviderCollection should not be null")},this.contentExtensionHostAPIGetter=t,this.dhcContainerPanel=e,this.isCommentPaneOpen=!1,this.areCommentExtensionProvidersDefinedOnce=!1,this.viewportInfo=r||Ht,this.containerIdToInfoMap={},this.contentAnchorPositions=[],this.contentTypeToExtensionProviderMap=new Map,this.floatingContainerFactory=n,this.ULS=o,this.processedContainersVisibleAtBoot=!1,this.isFirstCommentRenderDone=!1,this.lastCommentVisibleID="",this.commentsTTVRReported=!1}return t.prototype.addContentAnchorPosition=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=-1);var o=n>-1?n:this.getContentCardInsertionPoint(t.anchorTop)+e;return this.contentAnchorPositions.splice(o,0,t),o},t.prototype.getContainerIdToInfoMap=function(){return this.containerIdToInfoMap},t.prototype.getContentAnchorPositions=function(){return this.contentAnchorPositions},t.prototype.getContentAnchorPosition=function(t){var e=this.getContentCardIndex(t);if(e>-1)return this.contentAnchorPositions[e]},t.prototype.initializeAndRenderFloatingContainer=function(t,e,n,o,i){void 0===o&&(o=!0),void 0===i&&(i=!1);var r;return r=this.initializeFloatingContainerState(t,n,o,i),i&&this.renderFloatingContainerAtAnchorPosition(e),r},t.prototype.isContainerInViewPort=function(t){return t>this.viewportInfo.y-.5*this.viewportInfo.height&&t<this.viewportInfo.y+1.5*this.viewportInfo.height},t.prototype.removeContentAnchorPosition=function(t){var e=this.getContentCardIndex(t);return-1===e?(this.ULS.sendTraceTag(595736577,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[RemoveContentAnchorPosition]Content anchor position for id ".concat(t," does not exist.")),-1):(this.contentAnchorPositions.splice(e,1),e)},t.prototype.checkIfContainerIdCorrespondsToGivenPosition=function(t,e){return t===this.getContainerIdUsingPositionalIndex(e)},t.prototype.getContainerIdUsingPositionalIndex=function(t){var e=this.contentAnchorPositions[t];return Nt({contentId:e.contentId,contentType:d(e.containerContentType),renderMode:i.e.Integrated})},t.prototype.createFloatingContainer=function(t,e,n,o){if(this.dhcContainerPanel)return this.floatingContainerFactory.createFloatingContainer(this.dhcContainerPanel,t,{contentId:e.contentId,contentType:d(e.containerContentType)},{anchorPoint:{x:0,y:n},isDraftContainer:o});this.ULS.sendTraceTag(595883361,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[createFloatingContainer]dhcContainerPanel is not yet set.")},t.prototype.initializeFloatingContainerState=function(t,e,n,o){if(t){var a=this.contentTypeToExtensionProviderMap.get(d(t.containerContentType));if(void 0===a)return this.ULS.sendTraceTag(595883363,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[initializeFCState]ExtensionProvider not found for contentType ".concat(t.containerContentType)),!1;var s=t.contentId;if(!s)return this.ULS.sendTraceTag(595883407,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[initializeFCState]ContentId is null or empty."),!1;var c=Nt({contentId:s,contentType:d(t.containerContentType),renderMode:i.e.Integrated}),u=void 0;if(n){if(!(u=this.createFloatingContainer(a,{contentId:s,containerContentType:t.containerContentType},t.anchorTop,o)))return this.ULS.sendTraceTag(595886286,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[createFloatingContainer] Could not create fc for content id ".concat(s)),!1;u.onContainerStateChanged.subscribe(this.getContainerStateChangedCallback(e,c))}if(this.containerIdToInfoMap[c])this.containerIdToInfoMap[c].floatingContainerRef=u;else{var p=Object(r.__assign)(Object(r.__assign)({position:{height:0,width:0,x:0,y:t.anchorTop}},this.containerIdToInfoMap[c]),{anchorTop:t.anchorTop,floatingContainerRef:u,hasBeenRendered:!1});this.containerIdToInfoMap[c]=p}return!0}return!1},t}(),qt=function(){function t(t,e,n,a,s,c,u,p){var l=this;this.floatingContainerPositioner=t,this.floatingContainerVirtualizer=e,this.store=n,this.featureSettings=c,this.trackChangesStore=p,this.isInitialActiveIdSet=!1,this.inFixedMode=!1,this.firstContainerBeingRendered=!0,this.fcManagerInitialized=!1,this.pauseContainerCreation=!1,this.containerDelayTimeMs=10,this.containerCreationQueue=[],this.isContainerQueueInProgress=!1,this.timeoutsToCreateContainer={},this.containerCreationEnqueueTimes={},this.stallDetectorTimeoutId=0,this.stallDetectorUsed=!1,this.queueStallDetectionTimeMs=1e3,this.draftContainerId="",this.emitEvent=function(t,e){if(l.store.isCommentPaneOpen||!l.store.dhcContainerPanel||!l.store.areCommentExtensionProvidersDefinedOnce)return l.store.ULS.sendTraceTag(538022540,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Warning,"FCM not handling the event. {\n          isCommentPaneOpen: ".concat(l.store.isCommentPaneOpen,",\n          dhcContainerPanelNotDefined: ").concat(!l.store.dhcContainerPanel,",\n          extensionProvidersNotDefined: ").concat(!l.store.areCommentExtensionProvidersDefinedOnce,"\n        }")),void(e&&e.viewportInfo&&(l.store.viewportInfo=e.viewportInfo));switch(t){case 0:if(e&&e.contentAnchorPosition){var n=e.contentAnchorPosition.contentId,r=e.noOfPrecedingThreadsOnSameLine?e.noOfPrecedingThreadsOnSameLine:0;if(!n)return void l.store.ULS.sendTraceTag(595903774,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[AddContainer]ContentId is null.");var a=Nt({contentId:n,contentType:d(e.contentAnchorPosition.containerContentType),renderMode:i.e.Integrated});if((P=l.store.getContainerIdToInfoMap()[a])&&P.floatingContainerRef)return void l.store.ULS.sendTraceTag(595097123,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Warning,"[AddContainer]Container already exists.");var s=l.store.initializeAndRenderFloatingContainer(e.contentAnchorPosition,a,l.onContainerResize,void 0,!0);if(l.draftContainerId=n,s){l.store.addContentAnchorPosition(e.contentAnchorPosition,r);var c={contentId:n,containerContentType:e.contentAnchorPosition.containerContentType};e.shouldSetFocus&&l.emitEvent(2,{containerContentDescriptor:c})}}break;case 1:if(e&&e.containerContentDescriptor){if(!e.containerContentDescriptor.contentId)return void l.store.ULS.sendTraceTag(595903775,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[DeleteContainer]ContentId is null.");a=Nt({contentId:e.containerContentDescriptor.contentId,contentType:d(e.containerContentDescriptor.containerContentType),renderMode:i.e.Integrated});if(!(P=l.store.getContainerIdToInfoMap()[a]))return void l.store.ULS.sendTraceTag(595723333,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[DeleteContainer]Container info for id ".concat(a," does not exist."));var u=P.position.y,p=l.deleteContainer(a,!!e.animateOutOnDeletion);if(-1===p)return;l.store.activeContainerId&&l.store.activeContainerId!==a?l.positionFloatingContainers(l.store.getContentAnchorPositions(),void 0,l.store.activeContainerId):l.positionFloatingContainers(l.store.getContentAnchorPositions().slice(p),u)}break;case 2:if(e&&e.containerContentDescriptor){if(!e.containerContentDescriptor.contentId)return void l.store.ULS.sendTraceTag(595903777,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[FocusContainer]ContentId is null.");var h=Nt({contentId:e.containerContentDescriptor.contentId,contentType:d(e.containerContentDescriptor.containerContentType),renderMode:i.e.Integrated});if(!l.store.getContainerIdToInfoMap()[h])return l.store.ULS.sendTraceTag(595903778,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[FocusContainer]Container with id ".concat(h," does not exist")),void l.setInitialActiveContainerIdV2(e.containerContentDescriptor,null);l.store.activeContainerId!==h&&(l.clearSelection(!0),l.positionFloatingContainers(l.store.getContentAnchorPositions(),void 0,h,void 0,!0));var C=l.store.getContainerIdToInfoMap()[h].floatingContainerRef;e.shouldSetFocus&&C&&C.setFocus(),l.store.activeContainerId=h}break;case 3:if(e&&e.contentAnchorPositions){if(e.containerContentByType&&e.containerContentByType[o.TrackedChange])for(var f=e.containerContentByType[o.TrackedChange],g=0,v=Object.entries(f);g<v.length;g++){var m=v[g],y=m[0],I=m[1];l.trackChangesStore.addOrUpdateStore(y,I)}l.processContentAnchorPositionsInView(e.contentAnchorPositions)}break;case 4:e&&e.viewportInfo&&(l.store.viewportInfo=e.viewportInfo,l.featureSettings.SynchronousContainerPositioningEnabled||l.positionFloatingContainers());break;case 5:if(e&&e.infoToReplaceContent){var b=e.infoToReplaceContent.currentContentId,T=e.infoToReplaceContent.newContentId;if(!b||!T)return void l.store.ULS.sendTraceTag(595855174,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[ReplaceContainerContent]".concat(b?"NewContentId":"CurrentContentId"," is null."));var P,E=Nt({contentId:b,contentType:d(e.infoToReplaceContent.containerContentType),renderMode:i.e.Integrated});if(!(P=l.store.getContainerIdToInfoMap()[E]))return void l.store.ULS.sendTraceTag(595855175,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[ReplaceContainerContent]ContainerInfo for id ".concat(E," does not exist"));if(!P.floatingContainerRef)return void l.store.ULS.sendTraceTag(595855176,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[ReplaceContainerContent]FloatingContainerRef with id ".concat(E," does not exist"));P.floatingContainerRef.changeRenderedContentIdentifier({contentId:T,contentType:d(e.infoToReplaceContent.containerContentType)}),l.replacementContentId=T;var S=Nt({contentId:T,contentType:d(e.infoToReplaceContent.containerContentType),renderMode:i.e.Integrated}),A=l.store.getContentCardIndex(E);if(-1===A)return void l.store.ULS.sendTraceTag(595855178,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[ReplaceContainerContent]Positional index for content id ".concat(b," should not be negative"));l.store.activeContainerId=l.store.activeContainerId===E?S:l.store.activeContainerId,l.store.getContainerIdToInfoMap()[S]=P,delete l.store.getContainerIdToInfoMap()[E],l.store.getContentAnchorPositions()[A].contentId=T}break;case 6:l.positionFloatingContainers()}},this.getAreContainersEnabled=function(){return!l.store.isCommentPaneOpen&&l.store.areCommentExtensionProvidersDefinedOnce},this.getContentAnchorPosition=function(t){if(!t)return null;var e=Nt({contentId:t,contentType:i.b.CommentThread,renderMode:i.e.Integrated}),n=l.store.getContentCardIndex(e);return-1!==n?l.store.getContentAnchorPositions()[n]:null},this.containerShouldBeCreatedEventHandler=function(t){var e=l.store.getContentCardIndex(t.containerId);l.store.initializeAndRenderFloatingContainer(l.store.getContentAnchorPositions()[e],t.containerId,l.onContainerResize)},this.updateCommentPaneState=function(){l.store.isCommentPaneOpen=!0,l.store.extensionProviderCollection&&(l.store.isCommentPaneOpen=0===l.store.extensionProviderCollection.providers.filter((function(t){return t.scope.contentType===i.b.CommentThread&&t.scope.renderMode===i.e.Integrated})).length),l.onCommentPaneStateChange()},this.onContainerResize=function(t){if(!l.store.isCommentPaneOpen&&t.stateChangeType===ct.Resize&&0!==t.contentRect.height){var e=t.contentIdentifier,n=Nt({contentId:e.contentId,contentType:e.contentType,renderMode:i.e.Integrated}),o=l.store.getContainerIdToInfoMap()[n];if(o){var r=o.position.height!==t.contentRect.height;if(l.isInitialActiveIdSet&&l.store.activeContainerId===n&&o.floatingContainerRef&&(l.onInitialActiveContainerRender?(l.onInitialActiveContainerRender(),l.onInitialActiveContainerRender=void 0):o.floatingContainerRef.setFocus()),r){if(o.position.height=t.contentRect.height,o.position.width=t.contentRect.width,l.firstContainerBeingRendered){var a=window.performance&&window.performance.now?window.performance.now():Date.now();l.store.ULS.sendTraceTag(595718473,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Info,a.toString()),wacBoot.WacSkeletalBoot.isSkeletalDeepLink()&&(Box4.FastViewExtensions.setDeepLinkComplete(),document.body.classList.remove("Deeplink"),Box4.FastViewExtensions.dismiss(),wacBoot.WacSkeletalBoot.setComponentReady("SkeletalPage")),l.firstContainerBeingRendered=!1}var s=void 0!==l.timeoutsToCreateContainer[n];if(l.featureSettings.DeselectionEnabled?l.positionContainersOnResize(n,o,s):l.positionFloatingContainers(l.store.getContentAnchorPositions(),void 0,l.store.activeContainerId,s),e.contentId&&e.contentId===l.draftContainerId){var c=l.store.isContainerInViewPort(o.anchorTop);l.store.ULS.sendTraceTag(553747984,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Info,"[ContainerResize] Draft Container created with id: ".concat(e.contentId," created and in viewport ").concat(c))}l.isInitialActiveIdSet&&l.store.activeContainerId===n&&o.floatingContainerRef&&(l.isInitialActiveIdSet=!1),o.floatingContainerRef&&o.floatingContainerRef.showFloatingContainer(s),t.contentIdentifier.contentId===l.replacementContentId&&(l.replacementContentId=void 0),s&&(delete l.timeoutsToCreateContainer[n],l.stallDetectorUsed||(window.clearTimeout(l.stallDetectorTimeoutId),l.processContainerQueue()))}}else l.store.ULS.sendTraceTag(595646153,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[ContainerResize] ContainerInfo does not exist, id: ".concat(n,", size: ").concat(t.contentRect.height))}},this.paneClosedCallback=a,this.paneOpenedCallback=s,this.destroyAllContainersCallback=u,c.ShouldInitialize&&this.initialize(),c.TrackChangesInSidetrackEnabled&&(Object(v.c)().registerComponent("TrackedChange",jt),function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(e){return t={priority:i.d.Primary,renderMode:i.e.Integrated,instanceId:_t.a,componentDimensions:void 0},[2,Object(i.f)().registerExtension(i.b.TrackedChange,"TrackedChange",t)]}))}))}().catch((function(t){l.store.ULS.sendTraceTag(538022360,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Warning,"Failed to register TrackChange extension: ".concat(t))})))}return t.prototype.initialize=function(){this.fcManagerInitialized||(this.store.initializeExtensionProviderCollection(this.updateCommentPaneState),this.floatingContainerVirtualizer.onContainerShouldBeCreated.subscribe(this.containerShouldBeCreatedEventHandler),this.fcManagerInitialized=!0)},t.prototype.enterFixedPositionMode=function(){this.inFixedMode=!0},t.prototype.exitFixedPositionMode=function(){this.inFixedMode=!1},t.prototype.setFirstCommentRenderDone=function(){this.store.isFirstCommentRenderDone=!0},t.prototype.setContainerCreationPauseState=function(t){this.pauseContainerCreation=t,t&&(this.containerCreationEnqueueTimes={},this.isContainerQueueInProgress=!1)},t.prototype.clearSelection=function(t){if(void 0===t&&(t=!1),this.store.activeContainerId){var e=this.store.getContainerIdToInfoMap()[this.store.activeContainerId];if(this.store.activeContainerId=void 0,!e)return;if(e.position.x=0,t)return;this.positionFloatingContainers()}},t.prototype.setInitialActiveContainerId=function(t){this.isInitialActiveIdSet=!0,this.clearSelection(),t&&t.contentId&&(this.store.activeContainerId=Nt({contentId:t.contentId,contentType:d(t.containerContentType),renderMode:i.e.Integrated}))},t.prototype.setInitialActiveContainerIdV2=function(t,e){this.isInitialActiveIdSet=!0,this.clearSelection(),t&&t.contentId&&(this.store.activeContainerId=Nt({contentId:t.contentId,contentType:d(t.containerContentType),renderMode:i.e.Integrated}),e&&(this.onInitialActiveContainerRender=e))},t.prototype.selectNextOrPrevContainer=function(t,e){var n=0;if(this.store.activeContainerId){var o=this.store.getContentCardIndex(this.store.activeContainerId);n=t?o-1>=0?o-1:this.store.getContentAnchorPositions().length-1:o+1<this.store.getContentAnchorPositions().length?o+1:0}this.emitEvent(2,{containerContentDescriptor:{contentId:this.store.getContentAnchorPositions()[n].contentId,containerContentType:this.store.getContentAnchorPositions()[n].containerContentType},shouldSetFocus:!0})},t.prototype.insertContentAnchorPosition=function(t,e,n){var o=n&&Math.abs(t.anchorTop-e)<=4?this.store.getContentCardIndex(n)+1:-1;this.store.addContentAnchorPosition(t,0,o)},t.prototype.processContentAnchorPositionsInView=function(t){var e=this,n=!1,o=void 0,r=void 0,a=0;if(t.forEach((function(s,c){if(s){var u=s.contentId;if(!u)return void e.store.ULS.sendTraceTag(595903808,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[processContentAnchorPosition]ContentId is null.");var p=Nt({contentId:u,contentType:d(s.containerContentType),renderMode:i.e.Integrated}),l=t.length;e.trackLastCommentRenderedInViewport(s,c,p,l);var h=e.store.getContainerIdToInfoMap()[p];if(!h){var C=e.store.initializeAndRenderFloatingContainer(s,p,e.onContainerResize,!1);return C&&(e.containerCreationQueue.push(p),e.containerCreationEnqueueTimes[p]=Date.now()),void(C&&(e.insertContentAnchorPosition(s,a,o),o=p,a=s.anchorTop))}var f=e.store.getContentCardIndex(p,s.anchorTop);if(-1===f)return void e.store.ULS.sendTraceTag(595883392,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Error,"[processContentAnchorPosition]Container was supposed to be found.");var g=e.store.getContentAnchorPositions()[f],v=void 0!==r&&h.position.y>=r.position.y&&h.position.y<=r.position.y+r.position.height,m=Math.abs(g.anchorTop-s.anchorTop)>4;if(n=n||m||v,m){var y=Nt({contentId:u,contentType:d(s.containerContentType),renderMode:i.e.Integrated});e.store.removeContentAnchorPosition(y),e.insertContentAnchorPosition(s,a,o)}o=p,a=s.anchorTop,h.anchorTop=s.anchorTop,r=h}})),this.updateProcessedContainersVisibleAtBootState(),this.isContainerQueueInProgress||this.processContainerQueue(),n||this.inFixedMode){var s=this.store.getContentAnchorPositions().length>0?this.store.getContentAnchorPositions()[0].anchorTop:void 0;this.positionFloatingContainers(this.store.getContentAnchorPositions(),s,this.store.activeContainerId)}},t.prototype.processContainerQueue=function(){var t=this;if(0===this.containerCreationQueue.length||this.pauseContainerCreation)this.isContainerQueueInProgress=!1;else{this.isContainerQueueInProgress=!0;var e=this.containerCreationQueue.shift(),n=this.store.getContentAnchorPosition(e);n&&(this.store.isContainerInViewPort(n.anchorTop)?this.timeoutsToCreateContainer[e]=window.setTimeout((function(){t.createContainer(n,e),t.setupStallDetector(e)}),this.containerDelayTimeMs):(this.deleteContainer(e),this.processContainerQueue()))}},t.prototype.trackLastCommentRenderedInViewport=function(t,e,n,o){this.store.processedContainersVisibleAtBoot||(this.store.isContainerInViewPort(t.anchorTop)?this.store.lastCommentVisibleID=n:0===e&&Object(Ut.d)(Ut.c,{component:"canvas",subComponent:"floatingComments",state:"unused"})),e!==o-1||this.store.processedContainersVisibleAtBoot||(this.store.processedContainersVisibleAtBoot=!0)},t.prototype.updateProcessedContainersVisibleAtBootState=function(){this.store.isFirstCommentRenderDone&&!this.store.processedContainersVisibleAtBoot&&(this.store.processedContainersVisibleAtBoot=!0,Object(Ut.d)(Ut.c,{component:"canvas",subComponent:"floatingComments",state:"unused"}))},t.prototype.setupStallDetector=function(t){var e=this;this.stallDetectorUsed=!1,this.stallDetectorTimeoutId=window.setTimeout((function(){e.stallDetectorUsed=!0,e.processContainerQueue(),e.store.ULS.sendTraceTag(593281990,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Warning,"[CommentCreationQueueStallDetector]: Container ".concat(t," creation resize call not received or took too long"))}),this.queueStallDetectionTimeMs)},t.prototype.createContainer=function(t,e){if(this.store.initializeAndRenderFloatingContainer(t,e,this.onContainerResize,!0)){if(this.containerCreationEnqueueTimes[e]){var n=Date.now();this.store.ULS.sendTraceTag(593891910,Dt.a.msoulscat_Wac_Telemetry,Mt.a.Info,"[DelayCreationPerfMetric]TimeToCreateCommentFromEnqueue:".concat(n-this.containerCreationEnqueueTimes[e])),delete this.containerCreationEnqueueTimes[e]}}else this.deleteContainer(e),this.processContainerQueue()},t.prototype.onCommentPaneStateChange=function(){this.store.isCommentPaneOpen?(this.store.areCommentExtensionProvidersDefinedOnce&&this.destroyAllContainers(),this.paneOpenedCallback&&this.paneOpenedCallback()):this.paneClosedCallback&&this.paneClosedCallback()},t.prototype.deleteContainer=function(t,e){void 0===e&&(e=!1);var n=this.store.removeContentAnchorPosition(t);if(-1===n)return-1;var o=this.store.getContainerIdToInfoMap()[t].floatingContainerRef;if(o){o.destroyFloatingContainer(e),clearTimeout(this.timeoutsToCreateContainer[t]),delete this.timeoutsToCreateContainer[t];var i=this.containerCreationQueue.indexOf(t);i>-1&&this.containerCreationQueue.splice(i,1)}return delete this.store.getContainerIdToInfoMap()[t],delete this.containerCreationEnqueueTimes[t],n},t.prototype.destroyAllContainers=function(){var t=this,e=Object.keys(this.store.getContainerIdToInfoMap());e.length>0&&this.destroyAllContainersCallback&&this.destroyAllContainersCallback(),e.forEach((function(e){t.deleteContainer(e)})),this.isContainerQueueInProgress=!1,this.containerCreationEnqueueTimes={},this.timeoutsToCreateContainer={},this.containerCreationQueue=[]},t.prototype.positionFloatingContainers=function(t,e,n,o,i){if(void 0===o&&(o=!1),void 0===i&&(i=!1),t&&t.length>0){var r=n?{containerId:n,containerPositionIndex:this.store.getContentCardIndex(n)}:void 0;this.floatingContainerPositioner.calculateNewPositions(t,this.store.getContainerIdToInfoMap(),{activeContainerInfo:r,disableRepositioningAnimation:o||this.inFixedMode,topOfFirstContainer:e,shouldUpdatePositions:!1})}this.floatingContainerVirtualizer.updateContainersVisibility(this.store.getContainerIdToInfoMap(),this.store.viewportInfo,o||this.inFixedMode||void 0!==this.replacementContentId,this.isInitialActiveIdSet?void 0:n,i)},t.prototype.positionContainersOnResize=function(t,e,n){var o=this.store.getContentCardIndex(t),i=this.store.activeContainerId?this.store.getContentCardIndex(this.store.activeContainerId):void 0;void 0!==i&&i>=o?this.positionFloatingContainers(this.store.getContentAnchorPositions(),void 0,this.store.activeContainerId,n):(o-=!(Bt(e)&&e.hasBeenRendered)&&o>0?1:0,this.positionFloatingContainers(this.store.getContentAnchorPositions().slice(o),void 0,void 0,n));Bt(e)&&(e.hasBeenRendered=!0)},t}(),Gt=function(){function t(){}return t.prototype.setFloatingContainerManager=function(t){this.floatingContainerManager=t},t.prototype.selectContainer=function(t,e){void 0===e&&(e=!0),(null==t?void 0:t.contentId)&&(null==t?void 0:t.containerContentType)===o.TrackedChange&&this.floatingContainerManager&&this.floatingContainerManager.emitEvent(2,{containerContentDescriptor:{contentId:t.contentId,containerContentType:o.TrackedChange},shouldSetFocus:e})},t}(),Qt=n(693),Jt=function(){function t(t){this.floatingContainerManager=t}return t.prototype.bringContentIntoView=function(t){var e=Lt(t.contentIdentifier.contentType);e&&this.floatingContainerManager.emitEvent(2,{containerContentDescriptor:{contentId:t.contentIdentifier.contentId,containerContentType:e},shouldSetFocus:!1})},t.prototype.moveFocus=function(t){if(t.resource){var e=Lt(t.resource.contentType);e&&this.floatingContainerManager.emitEvent(2,{containerContentDescriptor:{contentId:t.resource.contentId,containerContentType:e},shouldSetFocus:!0})}},t.prototype.selectNextOrPreviousContent=function(t){var e,n;t.selectDirection!==Qt.a.None&&this.floatingContainerManager.selectNextOrPrevContainer(t.selectDirection===Qt.a.Previous,null!==(n=null===(e=t.from)||void 0===e?void 0:e.contentType)&&void 0!==n?n:void 0)},t}(),Kt=n(196),Yt=function(){function t(){this.trackChangeInfoById=new Map,this.storeUpdateHandlers=new Map,this.updateVersion=0}return t.prototype.registerOnStoreUpdate=function(t,e){this.storeUpdateHandlers.set(t,e)},t.prototype.addOrUpdateStore=function(t,e){this.trackChangeInfoById.set(t,e);var n=this.storeUpdateHandlers.get(t);n&&n(e)},t.prototype.removeFromStore=function(t){this.trackChangeInfoById.delete(t),this.storeUpdateHandlers.delete(t)},t.prototype.reloadStore=function(){this.updateVersion++},t.prototype.registerTrackChangeCardActionExecuter=function(t){this.trackChangeCardActionExecuter=t},t.prototype.getCardActionCallbacks=function(t){return{onAcceptClick:this.createActionCallback("AcceptClick",t),onRejectClick:this.createActionCallback("RejectClick",t),onAcceptHoverIn:this.createActionCallback("AcceptMouseOver",t),onAcceptHoverOut:this.createActionCallback("AcceptMouseOut",t),onRejectHoverIn:this.createActionCallback("RejectMouseOver",t),onRejectHoverOut:this.createActionCallback("RejectMouseOut",t),onCardHoverIn:this.createActionCallback("CardMouseOver",t),onCardHoverOut:this.createActionCallback("CardMouseOut",t),onCardClick:this.createActionCallback("CardClick",t)}},t.prototype.getContainerContent=function(t){return this.trackChangeInfoById.get(t)},t.prototype.clearStore=function(){this.trackChangeInfoById.clear(),this.storeUpdateHandlers.clear()},t.prototype.createActionCallback=function(t,e){var n=this;return function(){n.trackChangeCardActionExecuter&&n.trackChangeCardActionExecuter(t,n.updateVersion,e)}},t}(),Xt=n(220),Zt=n(426),$t=n(449),te=new(function(){function t(){this.trackChangesStore=new Yt,this.trackChangeCardSelectionActor=new Gt}return t.prototype.getFCManagerInstance=function(t){if(void 0===this.floatingContainerManagerInstance){if(!t)throw new Error("Floating Container Manager creation arguments are missing!");t.ulsLogger&&Ft.a.setLogger(t.ulsLogger);var e=function(t){return t.featureGates?{DeselectionEnabled:!!t.featureGates.deselectionEnabled,FloatingContainerVirtualizationEnabled:!!t.featureGates.floatingContainerVirtualizationEnabled,ImproveJumpingFixEnabled:!!t.featureGates.improveJumpingFixEnabled,ShouldInitialize:!1!==t.featureGates.shouldInitialize,ScrollingPerfImprovementEnabled:!!t.featureGates.scrollingPerfImprovementEnabled,SynchronousContainerPositioningEnabled:!!t.featureGates.synchronousContainerPositioningEnabled,TrackChangesInSidetrackEnabled:!!t.featureGates.trackChangeInSidetrackEnabled}:{DeselectionEnabled:!!t.deselectionEnabled,FloatingContainerVirtualizationEnabled:!!t.floatingContainerVirtualizationEnabled,ImproveJumpingFixEnabled:!!t.improveJumpingFixEnabled,ShouldInitialize:!1!==t.shouldInitialize,ScrollingPerfImprovementEnabled:!!t.scrollingPerfImprovementEnabled,SynchronousContainerPositioningEnabled:!!t.synchronousContainerPositioningEnabled,TrackChangesInSidetrackEnabled:!!t.trackChangesInSidetrackEnabled}}(t),n=t.isRtl?1:-1,o=t.canvasAndFcHostOffset?n*(t.canvasAndFcHostOffset-1):0,r=new u(Nt,Ft.a,o),a={containerVirtualizationEnabled:e.FloatingContainerVirtualizationEnabled},s=new C(a),c=new Wt(i.f,t.containerPanel,wt,Ft.a,t.viewportInfo);t.featureGateApiSettings&&Object(Xt.b)({appSettings:t.featureGateApiSettings,mapping:Zt.a}),t.telemetryDetails&&Object(f.k)($t.a,t.telemetryDetails),this.floatingContainerManagerInstance=new qt(r,s,c,t.paneClosedCallback,t.paneOpenedCallback,e,t.destroyAllContainersCallback,this.trackChangesStore),this.init(this.floatingContainerManagerInstance,e)}return this.floatingContainerManagerInstance},t.prototype.getTrackChangesStoreApi=function(){return this.trackChangesStore},t.prototype.getFCContentNavigationAPI=function(t){return this.floatingContainerContentNavigationAPI||(this.floatingContainerContentNavigationAPI=new Jt(t)),this.floatingContainerContentNavigationAPI},t.prototype.getTrackChangesStore=function(){return this.trackChangesStore},t.prototype.getTrackChangeCardSelectionActor=function(){return this.trackChangeCardSelectionActor},t.prototype.init=function(t,e){e.TrackChangesInSidetrackEnabled&&(this.getTrackChangeCardSelectionActor().setFloatingContainerManager(t),Object(Kt.h)(this.getFCContentNavigationAPI(t),_t.a))},t}()),ee=te;n.d(e,"FactoryGlobal",(function(){return ee}))}}]);
//# sourceMappingURL=floatingContainerManager.min.js.map